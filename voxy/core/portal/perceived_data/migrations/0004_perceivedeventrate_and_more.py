# Generated by Django 4.1.2 on 2023-02-01 20:22

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0062_alter_cameraincidenttype_camera_and_more'),
        ('devices', '0011_camera_thumbnail_s3_path'),
        ('perceived_data', '0003_remove_perceivedactorstatedurationaggregate_perceived_actor_state_duration_aggregate_unique_constrai'),
    ]

    operations = [
        migrations.CreateModel(
            name='PerceivedEventRate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('date', models.DateField(help_text="The last date included in this rate calculation. This essentially means the value of this record can be considered the 'N day rate' for the date specified in this field (e.g. the 30 day rate for Jan 1, 2023).")),
                ('day_count', models.PositiveSmallIntegerField(help_text="Number of days included in this rate calculation, inclusive of the day specified in the 'date' field.")),
                ('value', models.DecimalField(decimal_places=10, default=0.0, help_text='Result of the perceived event rate calculation.', max_digits=19)),
                ('total_actor_state_duration', models.DurationField(default=0, help_text='Total actor state duration for all state included in this calculation.')),
                ('camera', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='perceived_event_rates', to='devices.camera')),
                ('incident_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='perceived_event_rates', to='api.incidenttype')),
            ],
            options={
                'db_table': 'perceived_event_rate',
            },
        ),
        migrations.AddConstraint(
            model_name='perceivedeventrate',
            constraint=models.UniqueConstraint(fields=('date', 'day_count', 'camera', 'incident_type'), name='perceived_event_rate_unique_constraint'),
        ),
    ]
