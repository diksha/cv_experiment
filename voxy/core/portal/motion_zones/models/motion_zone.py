from django.contrib import admin
from django.db import models

from core.portal.api.models.organization import Organization
from core.portal.devices.models.camera import Camera
from core.portal.lib.models.base import Model
from core.portal.zones.models.zone import Zone


class MotionZone(Model):
    """Model representing a motion zone."""

    class Meta:
        """Django meta class used to configure the model."""

        app_label = "motion_zones"
        db_table = "motion_zone"

    uuid = models.CharField(
        help_text=(
            "Unique identifier generated by perception systems used to"
            + " identify a specific motion zone"
        ),
        max_length=250,
        null=False,
        blank=False,
        unique=True,
    )
    name = models.CharField(
        help_text="User friendly name displayed throughout apps.",
        max_length=250,
        null=False,
        blank=False,
    )
    organization = models.ForeignKey(
        Organization,
        on_delete=models.CASCADE,
        blank=False,
        null=False,
        related_name="motion_zones",
    )
    zone = models.ForeignKey(
        Zone,
        on_delete=models.CASCADE,
        blank=False,
        null=False,
        related_name="motion_zones",
    )
    camera = models.ForeignKey(
        Camera,
        on_delete=models.CASCADE,
        blank=False,
        null=False,
        related_name="motion_zones",
    )

    def __str__(self) -> str:
        """String representation of a model instance.

        Returns:
            str: string representation
        """
        return " > ".join(
            [
                self.organization.name,
                self.zone.name,
                self.camera.name,
                self.name,
            ]
        )


admin.site.register(MotionZone)
