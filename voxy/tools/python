#!/bin/bash

set -euo pipefail

FILEPATH=$(readlink -f "$0")
BASEDIR=$(dirname "$FILEPATH")
WORKSPACEDIR=$(dirname "$BASEDIR")
cd "$WORKSPACEDIR" || exit 1

BINARY="$WORKSPACEDIR/bazel-bin/third_party/python3/python3"

if ! test -f "$BINARY"; then
	"$WORKSPACEDIR"/bazel build //third_party/python3:python3
fi

exec "$BINARY" "$@"
