load("@rules_pkg//:pkg.bzl", "pkg_zip")
load("//third_party/aws/greengrass:defs.bzl", "greengrass_component")

pkg_zip(
    name = "artifact",
    srcs = [
        "//services/edge/metricsagent/cmd/metricsagent",
    ],
)

greengrass_component(
    name = "prod",
    artifact = "artifact.zip",
    component_name = "voxel.edge.MetricsAgent",
    recipe_template = "recipe.yaml",
    version = "0.0.25",
)

greengrass_component(
    name = "dev",
    artifact = "artifact.zip",
    component_name = "voxel.edge.MetricsAgentDev",
    recipe_template = "recipe.yaml",
    version = "0.0.30",
)

alias(
    name = "prod.release",
    actual = ":prod.create-version",
)

alias(
    name = "dev.release",
    actual = ":dev.create-version",
)
